<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø£Ù†Ù…ÙŠ Ø²ÙŠÙ†</title>

<!-- ===== AdSense Main Script ===== -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9094508203387590"
crossorigin="anonymous"></script>
<!-- ============================ -->

<style>
body { font-family: Arial, sans-serif; background:#121212; color:#fff; margin:0; padding:0;}
header { background:#ff3b3f; padding:20px; text-align:center; font-size:28px; font-weight:bold; box-shadow:0 4px 10px rgba(0,0,0,0.5);}

.slider { position: relative; width: 100%; max-width: 1000px; margin: 20px auto; overflow: hidden; border-radius: 15px;}
.slides { display:flex; transition: transform 0.8s ease-in-out;}
.slide { min-width:100%; }
.slide img { width:100%; height:450px; object-fit:cover; border-radius:15px; }

.prev, .next {
 position:absolute; top:50%; transform:translateY(-50%);
 background:rgba(0,0,0,0.6); color:#fff;
 border:none; border-radius:50%; padding:10px; cursor:pointer;
 z-index:10;
}
.prev{left:10px;} .next{right:10px;}

.anime-section { margin:20px 0; position: relative; }
.anime-list {
  display:flex;
  flex-wrap:nowrap;
  overflow-x:auto;
  padding:10px;
  gap:10px;
}
.anime-card {
 background:#1e1e1e;
 width:180px;
 border-radius:12px;
 overflow:hidden;
 cursor:pointer;
 transition:0.3s;
 flex-shrink:0;
}
.anime-card:hover {transform:scale(1.05); box-shadow:0 0 15px #ff3b3f;}
.anime-card img{width:100%; height:220px; object-fit:cover;}
.card-overlay{
 position:absolute; inset:0; background:rgba(0,0,0,0.7);
 display:flex; justify-content:center; align-items:center;
 opacity:0; transition:0.3s;
}
.anime-card:hover .card-overlay{opacity:1;}

.more-card{
 background:#ff3b3f;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:18px;
 font-weight:bold;
 color:white;
 height:220px;
 border-radius:12px;
 cursor:pointer;
 flex-shrink:0;
}
.more-card:hover{background:#ff5559; transform:scale(1.05);}

.add-button{
 display:block; margin:20px auto; padding:10px 20px;
 background:#28a745; color:#fff; border:none; border-radius:8px;
 cursor:pointer;
}

#searchInput{
 padding:10px; width:80%; max-width:400px; display:block;
 margin:10px auto; border-radius:8px; border:none;
}

.category-filter{
 display:flex; flex-wrap:wrap; justify-content:center; gap:8px; margin:10px;
}
.category-filter span{
 background:#2a2a2a; padding:6px 14px; border-radius:20px; cursor:pointer;
 color:#fff;
}
h2{text-align:center;}
</style>
</head>
<body>

<header>Ø§Ù„Ø£Ù†Ù…ÙŠ Ø²ÙŠÙ†</header>

<!-- ===== Banner AdSense ===== -->
<div style="text-align:center; margin:15px 0;">
  <ins class="adsbygoogle"
       style="display:block; text-align:center;"
       data-ad-layout="in-article"
       data-ad-format="fluid"
       data-ad-client="ca-pub-9094508203387590"
       data-ad-slot="1234567890"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>
<!-- =========================== -->

<div class="slider">
  <div class="slides" id="slides"></div>
  <button class="prev" onclick="prevSlide()">&#10094;</button>
  <button class="next" onclick="nextSlide()">&#10095;</button>
</div>

<button class="add-button" onclick="askPassword()">Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>

<input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ù†Ù…ÙŠ...">

<div class="category-filter" id="categoryFilter"></div>
<div class="category-filter" id="typeFilter"></div>

<div class="anime-section">
<h2>ğŸ¯ Ø§Ù„Ø£Ù†Ù…ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</h2>
<div class="anime-list" id="animeList"></div>
</div>

<div class="anime-section">
<h2>ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</h2>
<div class="anime-list" id="mostViewedList"></div>
</div>

<div class="anime-section">
<h2>ğŸ’¥ Ø£Ù†Ù…ÙŠ Ø£ÙƒØ´Ù†</h2>
<div class="anime-list" id="actionList"></div>
</div>

<div class="anime-section">
<h2>ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª</h2>
<div class="anime-list" id="seriesList"></div>
</div>

<div class="anime-section">
<h2>ğŸ¬ Ø£ÙÙ„Ø§Ù…</h2>
<div class="anime-list" id="moviesList"></div>
</div>

<div class="anime-section">
<h2>ğŸ“ Ù…Ù„Ø®Ù‘ØµØ§Øª</h2>
<div class="anime-list" id="summaryList"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
 apiKey: "AIzaSyBYEyu6TxSv1qSLCRvr0YCdaVcewhxAmQY",
 authDomain: "appp-1234.firebaseapp.com",
 databaseURL: "https://appp-1234-default-rtdb.firebaseio.com",
 projectId: "appp-1234",
 storageBucket: "appp-1234.firebasestorage.app",
 messagingSenderId: "666495369108",
 appId: "1:666495369108:web:aabf062e066cea6c3b9981"
};
firebase.initializeApp(firebaseConfig);
const animesRef = firebase.database().ref('animes');
</script>

<script>
document.addEventListener("DOMContentLoaded", function(){

  const slidesContainer = document.getElementById("slides");
  const animeList = document.getElementById("animeList");
  const searchInput = document.getElementById("searchInput");

  const categoryFilter = document.getElementById("categoryFilter");
  const typeFilter = document.getElementById("typeFilter");

  let animes = []; 
  let currentIndex = 0;

  const categories = ["Ø£ÙƒØ´Ù†","Ù…ØºØ§Ù…Ø±Ø©","Ø±ÙŠØ§Ø¶ÙŠ","ØºÙ…ÙˆØ¶","ÙƒÙˆÙ…ÙŠØ¯ÙŠ","Ø¯Ø±Ø§Ù…Ø§","Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ","Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ","ÙØ§Ù†ØªØ§Ø²ÙŠØ§"];
  const types = ["Ù…Ø³Ù„Ø³Ù„","ÙÙŠÙ„Ù…","Ù…Ù„Ø®Ù‘Øµ"];
  let activeFilters = [], activeTypeFilters = [];

  // ----- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙ„ØªØ±Ø© Ù„Ù„Ù€ categories -----
  categories.forEach(c=>{
    let sp = document.createElement("span");
    sp.textContent = c;
    sp.onclick = () => {
      sp.classList.toggle("active");
      sp.style.background = sp.classList.contains("active")?"#ff3b3f":"#2a2a2a";
      activeFilters = [...document.querySelectorAll("#categoryFilter .active")].map(e=>e.textContent);
      renderAnimeList();
    };
    categoryFilter.appendChild(sp);
  });

  types.forEach(t=>{
    let sp = document.createElement("span");
    sp.textContent = t;
    sp.onclick = () => {
      sp.classList.toggle("active");
      sp.style.background = sp.classList.contains("active")?"#28a745":"#2a2a2a";
      activeTypeFilters = [...document.querySelectorAll("#typeFilter .active")].map(e=>e.textContent);
      renderAnimeList();
    };
    typeFilter.appendChild(sp);
  });

  // ----- Fetch data from Firebase -----
  animesRef.on('value', snap=>{
    const data = snap.val();
    if(!data) return; 
    animes = Array.isArray(data)?data:Object.values(data);

    renderSlider();
    renderAnimeList();
    renderSection("mostViewedList",[...animes].sort((a,b)=>(b.views||0)-(a.views||0)).slice(0,7));
    renderSection("actionList", animes.filter(a=>a.category?.includes("Ø£ÙƒØ´Ù†")).slice(0,7));
    renderSection("seriesList", animes.filter(a=>a.type==="Ù…Ø³Ù„Ø³Ù„").slice(0,7));
    renderSection("moviesList", animes.filter(a=>a.type==="ÙÙŠÙ„Ù…").slice(0,7));
    renderSection("summaryList", animes.filter(a=>a.type==="Ù…Ù„Ø®Ù‘Øµ").slice(0,7));
  });

  function buildCard(anime){
    const card=document.createElement("div");
    card.className="anime-card";
    card.innerHTML=`
      <div style="position:relative">
        <img src="${anime.image}">
        <div class="card-overlay"><h3>${anime.title}</h3></div>
      </div>`;
    card.onclick=()=>location.href=`anime.html?title=${encodeURIComponent(anime.title)}`;
    return card;
  }

  // Slider
  function renderSlider(){
    slidesContainer.innerHTML="";
    animes.slice(0,7).forEach(a=>{
      let div=document.createElement("div");
      div.className="slide";
      div.innerHTML=`<img src="${a.image}">`;
      slidesContainer.appendChild(div);
    });
    showSlide();
  }
  function showSlide(){slidesContainer.style.transform=`translateX(-${currentIndex*100}%)`;}
  window.nextSlide=()=>{currentIndex=(currentIndex+1)%7;showSlide();}
  window.prevSlide=()=>{currentIndex=(currentIndex-1+7)%7;showSlide();}
  setInterval(nextSlide,5000);

  // Main list + search
  function renderAnimeList(){
    animeList.innerHTML="";
    const text = searchInput.value.toLowerCase();
    animes.forEach(a=>{
      if(!a.title.toLowerCase().includes(text)) return;
      if(activeFilters.length && !a.category?.some(c=>activeFilters.includes(c))) return;
      if(activeTypeFilters.length && !activeTypeFilters.includes(a.type)) return;
      animeList.appendChild(buildCard(a));
    });
  }
  searchInput.oninput = renderAnimeList;

  // Generic renderSection
  function renderSection(id, arr){
    const container = document.getElementById(id);
    container.innerHTML="";
    arr.forEach(a=>container.appendChild(buildCard(a)));
    const more = document.createElement("div");
    more.className="more-card";
    more.textContent="Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø²ÙŠØ¯";
    more.onclick=()=>alert("ØµÙØ­Ø© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù„Ù… ØªÙÙ†Ø´Ø£ Ø¨Ø¹Ø¯"); // Replace with actual link
    container.appendChild(more);
  }

  // Password redirect
  window.askPassword=()=>{
    const p=prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
    if(p==="a") location.href="add_episode.html";
    else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
  };

});
</script>

</body>
</html>
