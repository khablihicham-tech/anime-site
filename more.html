<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø²ÙŠØ¯</title>

<style>
body{background:#121212;color:white;font-family:Arial;margin:0}
header{background:#ff3b3f;padding:15px;text-align:center;font-size:22px;font-weight:bold}
.anime-list{display:flex;flex-wrap:wrap;gap:12px;padding:15px;justify-content:center}

.anime-card{background:#1e1e1e;width:180px;border-radius:12px;overflow:hidden;cursor:pointer;transition:0.3s}
.anime-card:hover{transform:scale(1.05);box-shadow:0 0 12px #ff3b3f;}
.anime-card img{width:100%;height:220px;object-fit:cover}

.card-title{padding:6px;text-align:center;font-size:14px}
</style>
</head>
<body>

<header id="sectionTitle">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø²ÙŠØ¯</header>
<div class="anime-list" id="moreList"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
 apiKey: "AIzaSyBYEyu6TxSv1qSLCRvr0YCdaVcewhxAmQY",
 authDomain: "appp-1234.firebaseapp.com",
 databaseURL: "https://appp-1234-default-rtdb.firebaseio.com",
 projectId: "appp-1234",
 storageBucket: "appp-1234.firebasestorage.app",
 messagingSenderId: "666495369108",
 appId: "1:666495369108:web:aabf062e066cea6c3b9981"
};
firebase.initializeApp(firebaseConfig);
const animesRef = firebase.database().ref('animes');

const moreList = document.getElementById("moreList");
const sectionTitle = document.getElementById("sectionTitle");

// Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø³Ù… Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
const params = new URLSearchParams(window.location.search);
const section = params.get("section");

// Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
const titles = {
  mostViewed: "ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©",
  action: "ğŸ’¥ Ø£Ù†Ù…ÙŠ Ø£ÙƒØ´Ù†",
  series: "ğŸ“º Ù…Ø³Ù„Ø³Ù„Ø§Øª",
  movies: "ğŸ¬ Ø£ÙÙ„Ø§Ù…",
  summary: "ğŸ“ Ù…Ù„Ø®Ù‘ØµØ§Øª"
};
sectionTitle.textContent = titles[section] || "Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø²ÙŠØ¯";

// Ø¨Ù†Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø©
function buildCard(anime){
  const card = document.createElement("div");
  card.className="anime-card";
  card.innerHTML = `
    <img src="${anime.image}">
    <div class="card-title">${anime.title}</div>
  `;
  card.onclick = ()=> location.href=`anime.html?title=${encodeURIComponent(anime.title)}`;
  return card;
}

// Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
animesRef.on('value', snap=>{
  const data = snap.val();
  if(!data) return;
  let animes = Array.isArray(data)?data:Object.values(data);

  let filtered = [];

  if(section==="mostViewed")
    filtered = [...animes].sort((a,b)=>(b.views||0)-(a.views||0));

  if(section==="action")
    filtered = animes.filter(a=>a.category?.includes("Ø£ÙƒØ´Ù†"));

  if(section==="series")
    filtered = animes.filter(a=>a.type==="Ù…Ø³Ù„Ø³Ù„");

  if(section==="movies")
    filtered = animes.filter(a=>a.type==="ÙÙŠÙ„Ù…");

  if(section==="summary")
    filtered = animes.filter(a=>a.type==="Ù…Ù„Ø®Ù‘Øµ");

  moreList.innerHTML="";
  filtered.forEach(a=>moreList.appendChild(buildCard(a)));
});
</script>

</body>
</html>
