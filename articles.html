<!DOCTYPE html>
<html lang="ar">
<head>

<style>
.top-header{
  background:#FF3B3F;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 20px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
  direction: rtl;
}

.logo img{
  height:45px;
}

.nav-links{
  display:flex;
  gap:20px;
  font-size:16px;
  font-weight:bold;
}

.nav-links a{
  color:#000;
  text-decoration:none;
}

.nav-links a:hover{
  color:#ff3b3f;
}

.search-btn{
  background:#ffffff;
  border-radius:50%;
  width:40px;
  height:40px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.search-btn img{
  width:18px;
}
</style>

<meta charset="UTF-8">
<title>AnimeZine - موقع الأنمي العربي</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="articles.js"></script>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg,#0b0b0b,#1a1a1a);
  color:#fff;
}
.container{
  max-width:1800px;
  margin:auto;
  padding:20px;
}

header{
  text-align:center;
  padding:40px 10px;
}
header h1{ color:#00c3ff; margin-bottom:10px; }
header p{ color:#ccc; font-size:18px; }

nav{ text-align:center; margin-bottom:30px; }
nav a{ color:#00c3ff; margin:0 15px; text-decoration:none; font-weight:bold; }

.controls{
  text-align:center;
  margin-bottom:25px;
}
.controls button{
  margin:5px;
  padding:8px 15px;
  background:#00c3ff;
  border:none;
  color:#fff;
  border-radius:5px;
  cursor:pointer;
  font-weight:bold;
}
.controls input{
  padding:8px;
  border-radius:5px;
  border:none;
  width:200px;
  margin-left:10px;
}

.cards{
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap:20px;
}

.card{
  background:#1a1a1a;
  border:2px solid #00c3ff;
  border-radius:10px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  height:420px;
}

.card img{
  width:100%;
  height:180px;
  object-fit:cover;
}

.card-content{
  padding:15px;
  display:flex;
  flex-direction:column;
  justify-content: space-between;
  height: calc(420px - 180px);
}

.card-content h3{ color:#00c3ff; }

.card-content a{
  color:#00c3ff;
  font-weight:bold;
  text-decoration:none;
  cursor:pointer;
}

.site-footer{
  background:#0b0b0b;
  padding:30px 10px;
  text-align:center;
  border-top:2px solid #00c3ff;
}
</style>
</head>

<body dir="rtl">

<div class="container">

<!-- ===== Top Navigation Bar ===== -->
<div class="top-header">

  <!-- زر البحث -->
  <div class="search-btn" onclick="document.getElementById('searchInput').focus()">
    <img src="https://cdn-icons-png.flaticon.com/512/622/622669.png">
  </div>

  <!-- روابط المنيو -->
  <div class="nav-links">
   <a href="index.html">الرئيسية</a>
<a href="articles.html">مقالات الأنمي</a>
<a href="#" id="moviesLink">أفلام الأنمي</a>
<a href="#" id="seriesLink">مسلسلات الأنمي</a>
<a href="#" id="schedulink">ملخصات الأنمي</a>
<a href="contact.html">اتصل بنا</a>

  </div>

  <!-- اللوغو -->
  <div class="logo">
    <img src="https://i.postimg.cc/X7qqxbYp/logo.png" alt="AnimeZine">
  </div>

</div>



<div class="controls" id="controls-container">
<button onclick="filterArticles('all')">الكل</button>
<input type="text" id="searchInput" placeholder="ابحث..." onkeyup="searchArticles()">
</div>

<div class="cards" id="articles-container"></div>

</div>

<footer class="site-footer">
  <nav>
<a href="index.html">الرئيسية</a> |
<a href="about.html">من نحن</a> |
<a href="privacy.html">سياسة الخصوصية</a> |
<a href="contact.html">اتصل بنا</a>
</nav>
<p>© 2026 AnimeZine</p>
</footer>

<script>
const container = document.getElementById("articles-container");
const controls = document.getElementById("controls-container");
let articles = window.articles || [];

const adLink = "https://www.effectivegatecpm.com/sw624wnv?key=14bf2d9992f14a961565f1b412d5979b";

// ✅ متغيرات الباجيناشن
let currentPage = 1;
const cardsPerPage = 24;
let filteredArticles = articles; // باش نحافظو على المقالات بعد الفلترة

displayArticlesPage(currentPage);
createFilterButtons();

function displayArticlesPage(page){
  container.innerHTML = "";
  const start = (page - 1) * cardsPerPage;
  const end = start + cardsPerPage;
  const articlesToShow = filteredArticles.slice(start, end);

  articlesToShow.forEach((article, index) => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${article.img}">
      <div class="card-content">
        <h3>${article.title}</h3>
        <p>${article.description}</p>
        <a onclick="handleEpisodeClick(${articles.indexOf(article)})">اقرأ المزيد</a>
      </div>
    `;
    container.appendChild(card);
  });

  renderPagination();
}

// ✅ توليد أزرار الصفحات
function renderPagination(){
  let pagination = document.getElementById("pagination");
  if(!pagination){
    pagination = document.createElement("div");
    pagination.id = "pagination";
    pagination.style.textAlign = "center";
    pagination.style.marginTop = "20px";
    container.parentNode.appendChild(pagination);
  }

  pagination.innerHTML = "";
  const totalPages = Math.ceil(filteredArticles.length / cardsPerPage);

  for(let i=1; i<=totalPages; i++){
    const btn = document.createElement("button");
    btn.textContent = i;
    btn.style.margin = "0 5px";
    btn.style.padding = "5px 10px";
    btn.style.border = "none";
    btn.style.borderRadius = "5px";
    btn.style.cursor = "pointer";
    btn.style.background = (i === currentPage) ? "#00c3ff" : "#1a1a1a";
    btn.style.color = (i === currentPage) ? "#fff" : "#00c3ff";
    btn.onclick = () => {
      currentPage = i;
      displayArticlesPage(currentPage);
    };
    pagination.appendChild(btn);
  }
}

// نظام الإعلان قبل الدخول
function handleEpisodeClick(id){
  let count = localStorage.getItem("click_counter");

  if(!count) count = 1;
  else count = parseInt(count) + 1;

  localStorage.setItem("click_counter", count);

  if(count === 1){
    window.open(adLink, "_blank");
  } else if(count === 2){
    window.location.href = "article.html?id=" + id;
    localStorage.setItem("click_counter", 0);
  }
}

// فلترة المقالات
function filterArticles(category){
  if(category === "all") filteredArticles = articles;
  else filteredArticles = articles.filter(a => a.categories.includes(category));
  currentPage = 1;
  displayArticlesPage(currentPage);
}

// البحث
function searchArticles(){
  const q = document.getElementById("searchInput").value.toLowerCase();
  filteredArticles = articles.filter(a => a.title.toLowerCase().includes(q));
  currentPage = 1;
  displayArticlesPage(currentPage);
}

// إنشاء أزرار الفلترة
function createFilterButtons(){
  const set = new Set();
  articles.forEach(a => a.categories.forEach(c => set.add(c)));
  [...set].forEach(cat=>{
    const btn = document.createElement("button");
    btn.textContent = cat;
    btn.onclick = ()=>filterArticles(cat);
    controls.insertBefore(btn, document.getElementById("searchInput"));
  });
}

// روابط القوائم
document.getElementById("moviesLink").onclick = (e)=>{ e.preventDefault(); location.href = "more.html?type=فيلم"; }
document.getElementById("seriesLink").onclick = (e)=>{ e.preventDefault(); location.href = "more.html?type=مسلسل"; }
document.getElementById("schedulink").onclick = (e)=>{ e.preventDefault(); location.href = "more.html?type=ملخّص"; }

</script>


</body>
</html>
